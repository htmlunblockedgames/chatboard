<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chatboard</title>

  <!-- Twikoo UI (regular, all features) -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js"></script>

  <style>
    /* Page wrapper */
    body{margin:0;background:#0b1021;color:#eaf0ff;font:14px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif}
    .wrap{max-width:900px;margin:32px auto;padding:0 16px}
    h1{margin:0 0 16px;font-size:22px;font-weight:700;letter-spacing:.2px}
    .card{background:rgba(22,28,60,.76);border:1px solid rgba(140,160,255,.14);border-radius:14px;box-shadow:0 10px 30px rgba(5,10,30,.35), inset 0 1px 0 rgba(255,255,255,.04);padding:14px}
    a{color:#7aa2ff}

    /* Hide email & website fields (keep everything else) */
    .twikoo input[type="email"],
    .twikoo input[type="url"] { display:none !important; }
    /* Hide their wrappers in modern browsers */
    .twikoo .el-form-item:has(input[type="email"]),
    .twikoo .el-form-item:has(input[type="url"]) { display:none !important; }

    /* Optional: compact toolbar */
    .twikoo .tk-action { gap:6px }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Chatboard</h1>
    <div class="card">
      <!-- Regular Twikoo container -->
      <div id="tcomment"></div>
    </div>
  </div>

  <script>
    // IMPORTANT: this must match the path you used in Worker/D1 data
    const PAGE_PATH = "/chatboard/";

    // Init regular Twikoo with your Cloudflare Worker backend
    twikoo.init({
      el: "#tcomment",
      envId: "https://twikoo-cloudflare.ertertertet07.workers.dev",
      path: PAGE_PATH,
      lang: "en",
    });

    // Extra safety for older browsers that don't support :has():
    function hideMailAndLink() {
      document.querySelectorAll('.twikoo input[type="email"], .twikoo input[type="url"]').forEach(inp => {
        const box = inp.closest('.el-form-item') || inp.closest('.tk-input') || inp.parentElement;
        if (box) box.style.display = 'none';
        inp.style.display = 'none';
      });
    }
    const mo = new MutationObserver(hideMailAndLink);
    mo.observe(document.getElementById('tcomment'), { childList: true, subtree: true });
    hideMailAndLink();
  </script>
</body>
</html>
